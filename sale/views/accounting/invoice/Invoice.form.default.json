{
    "name": "Invoice",
    "description": "Invoice default form.",
    "access": {
        "groups": ["sale.default.user"]
    },
    "actions": [
        {
            "id": "action.invoice",
            "label": "Invoice",
            "description": "To Invoice.",
            "controller": "core_model_transition",
            "visible": ["status", "=", "proforma"],
            "params": {
                "entity": "sale\\accounting\\invoice\\Invoice",
                "transition": "invoice",
                "ids": []
            }
        },
        {
            "id": "action.cancel-proforma",
            "label": "Cancel",
            "description": "Cancel proforma.",
            "controller": "core_model_transition",
            "visible": ["status", "=", "proforma"],
            "params": {
                "entity": "sale\\accounting\\invoice\\Invoice",
                "transition": "cancel-proforma",
                "ids": []
            }
        },
        {
            "id": "action.cancel",
            "label": "Cancel",
            "description": "Cancel invoice.",
            "controller": "sale_accounting_invoice_cancel",
            "confirm": true,
            "visible": ["status", "=", "invoice"]
        },
        {
            "id": "action.download-pdf",
            "label": "Download pdf",
            "description": "Download invoice pdf version (lines without groups).",
            "controller": "sale_accounting_invoice_download-pdf",
            "confirm": false,
            "params": {
                "id": "object.id",
                "mode": "simple"
            }
        },
        {
            "id": "action.download-detailed-pdf",
            "label": "Download detailed pdf",
            "description": "Download detailed invoice pdf version (lines by groups).",
            "controller": "sale_accounting_invoice_download-pdf",
            "confirm": false,
            "params": {
                "id": "object.id",
                "mode": "detailed"
            }
        },
        {
            "id": "action.download-grouped-pdf",
            "label": "Download grouped pdf",
            "description": "Download grouped invoice pdf version (groups by vat rate).",
            "controller": "sale_accounting_invoice_download-pdf",
            "confirm": false,
            "params": {
                "id": "object.id",
                "mode": "grouped"
            }
        }
    ],
    "routes": [
        {
            "id": "route.print.pdf",
            "label": "Print invoice",
            "description": "Displays all lines but without group.",
            "icon": "print",
            "route": "/?get=sale_accounting_invoice_render-pdf&mode=simple&id=object.id",
            "target": "_blank",
            "absolute": true
        },
        {
            "id": "route.print-detailed.pdf",
            "label": "Print detailed invoice",
            "description": "Displays all lines by group.",
            "icon": "print",
            "route": "/?get=sale_accounting_invoice_render-pdf&mode=detailed&id=object.id",
            "target": "_blank",
            "absolute": true
        },
        {
            "id": "route.print-grouped.pdf",
            "label": "Print grouped invoice",
            "description": "Displays only groups by vat.",
            "icon": "print",
            "route": "/?get=sale_accounting_invoice_render-pdf&mode=grouped&id=object.id",
            "target": "_blank",
            "absolute": true
        }
    ],
    "layout": {
        "extends": {
            "entity": "finance\\accounting\\Invoice",
            "view": "form.default"
        },
        "remove": [
            "item.invoice_purpose",
            "section.accounting_entries",
            "item.due_date"
        ],
        "update": {
            "item.invoice_number": {
                "after": [
                    {
                        "type": "field",
                        "label": "Customer",
                        "value": "customer_id",
                        "width": "50%"
                    }
                ]
            },
            "item.invoice_type": {
                "after": [
                    {
                        "type": "field",
                        "value": "due_date",
                        "width": "33%",
                        "visible": ["status", "=", "invoice"]
                    },
                    {
                        "type": "field",
                        "value": "payment_terms_id",
                        "width": "33%",
                        "visible": ["status", "<>", "invoice"]
                    }
                ]
            },
            "item.reversed_invoice_id": {
                "after": [
                    {
                        "type": "field",
                        "value": "customer_ref",
                        "width": "33%"
                    }
                ]
            },
            "item.invoice_lines_ids": {
                "attributes": {
                    "widget": {
                        "view": "list.default"
                    }
                }
            }
        }
    }
}
